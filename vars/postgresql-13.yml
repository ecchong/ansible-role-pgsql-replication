---
#max_replication_slots: 10
pgsqlrep_wal_keep_segments: 1000
pgsqlrep_wal_keep_size: 16
pgsqlrep_postgres_conf_lines:
  - regexp: '#?wal_level = \w+(\s+#.*)'
    line: 'wal_level = {{ pgsqlrep_wal_level }}\1'

  - regexp: '#?max_wal_senders = \d+(\s+#.*)'
    line: 'max_wal_senders = {{ pgsqlrep_max_wal_senders }}\1'

  - regexp: '#?wal_keep_size = \w+(\s+#.)'
    line: 'wal_keep_size = {{ pgsqlrep_wal_keep_segments * pgsqlrep_wal_keep_size }}'
    with_backref: false

  - regexp: '#?synchronous_standby_names = .*'
    line: "synchronous_standby_names = '{{ pgsqlrep_application_name }}'"

  - regexp: '#?synchronous_commit = \w+(\s+#.*)'
    line: 'synchronous_commit = {{ pgsqlrep_synchronous_commit }}\1'

  - regexp: '^.*wal_log_hints\s*=\s*\w+([^\S\n\r]?#*.*$)'
    line: 'wal_log_hints = on \1'
